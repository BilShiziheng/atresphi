# [Demo](https://lchz&#104;3473.github.io/sim-phi/index "AtersPhi模拟器")

## 简介

如题，用 js/canvas 还原 Phi&#103;ros 游戏画面，属于个人兴趣项目，仅用于学习和测试；

模拟器代码部分为 [@lchz&#104;3473](https://space.bilibili.com/274753872) (以下简称 lchz&#104;) 和BilShiziheng编写，与《[Phi&#103;ros](https://www.taptap.com/app/165287)》游戏本体无关，您因使用或修改代码所造成的一切后果由您自己承担；


### 特别感谢

- [@Mac-Fus](https://space.bilibili.com/319384496) 提供Mac虚拟机支持
- [@星星awa](https://space.bilibili.com/111933676) 提供Safari适配方案
- [@luch4736](https://space.bilibili.com/481266830) 提供直接的iOS设备和支持qwq
- 以及看到这个页面的你！


## 更新日志

### [?.?.?] - 20??.??.??

#### 新内容

- 对pec谱面自带的配置文件提供支持：`Settings.txt`/`info.txt`
- 新增`音效音量`下拉框(实时生效)
- 新增`更多设置`按钮，以支持更多的设置项
- 新增`显示Acc`复选框(实时生效)，该项选中时：
  - 画面右上角分数下方显示实时`Acc`
- 新增`显示统计`复选框(实时生效)，该项选中时：
  - 画面左方显示实时偏移`DSP`和平均偏移`AVG`(单位ms)
  - 画面右方显示不同类型判定实时的触发数目
  - 画面左下角显示不同类型`Note`的出现数目
- 新增`低分辨率`复选框(实时生效)，该项选中时：
  - 画面分辨率变为原来的`1/2`，也许会提升性能
- 新增`横屏锁定`复选框(实时生效)，该项选中时：
  - 全屏时自动横屏，部分设备或浏览器可能不支持
- 支持播放背景视频(`音乐`下拉框选中支持的视频文件时生效)

#### 优化

- 重构谱面预处理和判定模块，也许会提升性能
- 重构pec谱面读取模块，为支持导入rpe格式的谱面做准备
- 针对判定区域重叠的情况进行优化：
  - 对于多押`Tap`、`Hold`和`Flick`，优先判定物理距离最近的音符
  - 现在符合特定条件的`Drag`和`Flick`会阻挡其后的`Tap`判定
- 重构`Flick`判定，现在与滑动速度相关联 (感谢 [@Mivik](https://github.com/mivik) 提供技术支持)
- 优化音频播放逻辑，也许会减少延迟

#### 更改

- 调整部分输入框：
  - `歌名`输入框名称改为`曲名`
  - 新增`曲师`输入框(显示于开始动画的曲名下方)
  - `等级`输入框拆分为`难度`下拉框和`等级`下拉框，统一格式（配置文件不受此限制）
- 调整`info.csv`部分属性：
  - 新增`Artist`(曲师，亦可写作`Composer`/`Musician`)
  - 背景变暗由`GlobalAlpha`调整为`BackgroundDim`
  - 谱师由`Designer`调整为`Charter`
- 调整`line.csv`部分属性：
  - 图片缩放与拉伸由`Vert`/`Horz`改为`Scale`/`Aspect`(默认均为`1`)
  - 跟随背景变暗由`IsDark`调整为`UseBackgroundDim`
  - 新增`UseLineColor`(跟随FC/AP指示器着色)
  - 新增`UseLineScale`(使用判定线缩放策略)
- 微调判定范围：水平判定范围由画面宽度的`23.555%`改为`23.625%`
- 大调界面UI
- 更改部分资源的引用路径或读取方式，移除本仓库的官方素材，采用本地素材
- 增加rks系统，只不过目前没想好放哪里（~~之前因为这个Server Down了~~）

#### 修复

- 修复读取部分zip文件时非utf8编码文件名显示乱码的问题
- 现在加载zip组件会正常显示加载文案，而不是无任何提示
- 修复空文件被错误识别为pec谱面的问题
- 现在切换全屏会清除当前键盘操作
- 修复了缩放窗口时画面闪烁的问题
- 现在也许能正确读取文件夹内的配置文件
- 修复部分`input`元素无法正常交互的问题
- 现在`谱面延时`的效果受`音乐变速`比例变化

#### 已删除

- 移除`开启打击音效`复选框


#### 更改

- `模拟Demo`改为Phi&#103;ros愚人节谱`Spasmodic SP`

### [1.0.0] - 2021-01-28
